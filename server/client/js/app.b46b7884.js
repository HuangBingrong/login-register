(function(e){function t(t){for(var a,i,n=t[0],l=t[1],u=t[2],m=0,p=[];m<n.length;m++)i=n[m],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);c&&c(t);while(p.length)p.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,n=1;n<r.length;n++){var l=r[n];0!==o[l]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var a={},o={app:0},s=[];function i(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=a,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(r,a,function(t){return e[t]}.bind(null,a));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=t,n=n.slice();for(var u=0;u<n.length;u++)t(n[u]);var c=l;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var a=r("85ec"),o=r.n(a);o.a},"07db":function(e,t,r){"use strict";var a=r("564e"),o=r.n(a);o.a},"0a5a":function(e,t,r){"use strict";var a=r("c13e"),o=r.n(a);o.a},"1f8c":function(e,t,r){"use strict";var a=r("e678"),o=r.n(a);o.a},"463f":function(e,t,r){e.exports=r.p+"img/404.b90312b3.gif"},"564e":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},s=[],i=(r("034f"),r("2877")),n={},l=Object(i["a"])(n,o,s,!1,null,null,null),u=l.exports,c=r("8c4f"),m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._v(" 主页面 ")])},p=[],f={},g=f,d=Object(i["a"])(g,m,p,!1,null,"0bccb14a",null),b=d.exports,v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login-container"},[r("div",{staticClass:"login-main"},[r("div",{staticClass:"login-title"},[e._v("在线后台管理系统")]),r("div",{staticClass:"login-content"},[r("el-form",{ref:"loginRef",staticClass:"demo-ruleForm",attrs:{model:e.loginForm,"status-icon":"",rules:e.loginRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{attrs:{type:"email","auto-complete":"off",placeholder:"请输入邮箱"},model:{value:e.loginForm.email,callback:function(t){e.$set(e.loginForm,"email",t)},expression:"loginForm.email"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"请输入密码"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),r("el-form-item",{attrs:{label:"职位",prop:"identity"}},[r("el-select",{attrs:{placeholder:"请选择职位"},model:{value:e.loginForm.identity,callback:function(t){e.$set(e.loginForm,"identity",t)},expression:"loginForm.identity"}},[r("el-option",{attrs:{label:"经理",value:"经理"}}),r("el-option",{attrs:{label:"员工",value:"员工"}})],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",size:"large"},on:{click:function(t){return e.loginSubmitForm("loginRef")}}},[e._v("登陆")])],1),r("a",{staticClass:"goRegister",attrs:{href:"/register"}},[e._v("没有账号，去注册")])],1)],1)])])},h=[],y={data:function(){return{loginForm:{email:"",password:"",identity:""},loginRules:{email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入合法的邮箱",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}],identity:[{required:!0,message:"请选择职位",trigger:"blur"}]}}},methods:{loginSubmitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.$axios.post("/user/login",t.loginForm).then((function(e){if(200===e.data.meta.status){t.$message({message:e.data.meta.msg,type:"success"});var r=JSON.stringify({token:e.data.meta.token,date:(new Date).getTime()});window.localStorage.setItem("tokenObj",r),t.$router.push("/index")}else t.$message({message:e.data.meta.msg,type:"error"})}))}))}}},w=y,F=(r("0a5a"),Object(i["a"])(w,v,h,!1,null,"5a13c584",null)),x=F.exports,_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"register-container"},[r("div",{staticClass:"register-main"},[r("div",{staticClass:"register-title"},[e._v("在线后台管理系统")]),r("div",{staticClass:"register-content"},[r("el-form",{ref:"registerRef",staticClass:"demo-ruleForm",attrs:{model:e.registerForm,"status-icon":"",rules:e.registerRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"name"}},[r("el-input",{attrs:{type:"string","auto-complete":"off",placeholder:"请输入用户名"},model:{value:e.registerForm.name,callback:function(t){e.$set(e.registerForm,"name",t)},expression:"registerForm.name"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{attrs:{type:"email","auto-complete":"off",placeholder:"请输入邮箱"},model:{value:e.registerForm.email,callback:function(t){e.$set(e.registerForm,"email",t)},expression:"registerForm.email"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"请输入密码"},model:{value:e.registerForm.password,callback:function(t){e.$set(e.registerForm,"password",t)},expression:"registerForm.password"}})],1),r("el-form-item",{attrs:{label:"确认密码",prop:"password2"}},[r("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"请确认密码"},model:{value:e.registerForm.password2,callback:function(t){e.$set(e.registerForm,"password2",t)},expression:"registerForm.password2"}})],1),r("el-form-item",{attrs:{label:"职位职位",prop:"identity"}},[r("el-select",{attrs:{placeholder:"请选择职位"},model:{value:e.registerForm.identity,callback:function(t){e.$set(e.registerForm,"identity",t)},expression:"registerForm.identity"}},[r("el-option",{attrs:{label:"经理",value:"经理"}}),r("el-option",{attrs:{label:"员工",value:"员工"}})],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.registerSubmitForm("registerRef")}}},[e._v("提交")]),r("el-button",{on:{click:function(t){return e.registerResetForm("registerRef")}}},[e._v("重置")])],1)],1)],1)])])},$=[],O=(r("b0c0"),{data:function(){var e=this,t=function(t,r,a){r!==e.registerForm.password?a(new Error("两次输入密码不一致!")):a()};return{registerForm:{name:"",email:"",password:"",password2:"",identity:""},registerRules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入合法的邮箱",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}],password2:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:t,trigger:"blur"}],identity:[{required:!0,message:"请选择职位",trigger:"blur"}]}}},methods:{registerSubmitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var r={name:t.registerForm.name,email:t.registerForm.email,password:t.registerForm.password,identity:t.registerForm.identity};t.$axios.post("/user/register",r).then((function(e){201===e.data.meta.status?(t.$message({message:e.data.meta.msg,type:"success"}),t.$router.push("/login")):t.$message({message:e.data.meta.msg,type:"info"})}))}))},registerResetForm:function(e){this.$refs[e].resetFields()}}}),k=O,j=(r("1f8c"),Object(i["a"])(k,_,$,!1,null,"17085f27",null)),R=j.exports,S=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},C=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"notFound"},[a("img",{attrs:{src:r("463f"),alt:"404"}})])}],E=(r("07db"),{}),P=Object(i["a"])(E,S,C,!1,null,"3914b6a2",null),q=P.exports;a["default"].use(c["a"]);var L=[{path:"/",redirect:"/index"},{path:"/index",name:"Index",component:b},{path:"/register",name:"Register",component:R},{path:"/login",name:"Login",component:x},{path:"*",name:"404",component:q}],M=new c["a"]({mode:"history",base:"/",routes:L});M.beforeEach((function(e,t,r){if("/login"===e.path||"/register"===e.path)r();else if(localStorage.tokenObj){var a=1e4,o=!((new Date).setTime()-JSON.parse(localStorage.tokenObj).date>a);o?r():r("/login")}else r("/login")}));var T=M,J=r("2f62");a["default"].use(J["a"]);var N,U=new J["a"].Store({state:{},mutations:{},actions:{},modules:{}}),A=(r("d3b7"),r("bc3a")),D=r.n(A),I=r("5c96"),V=r.n(I);function z(){N=I["Loading"].service({lock:!0,text:"拼命加载中……",background:"rgb(0, 0, 0, 0.3)"})}function B(){N.close()}D.a.interceptors.request.use((function(e){return z(),e}),(function(e){return Promise.reject(e)})),D.a.interceptors.response.use((function(e){return B(),e}),(function(e){return B(),I["Message"].error(e),Promise.reject(e)}));var G=D.a;r("0fae");a["default"].use(V.a),G.defaults.baseURL=Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_API_URL||"/api/",a["default"].prototype.$axios=G,a["default"].config.productionTip=!1,new a["default"]({router:T,store:U,render:function(e){return e(u)}}).$mount("#app")},"85ec":function(e,t,r){},c13e:function(e,t,r){},e678:function(e,t,r){}});
//# sourceMappingURL=app.b46b7884.js.map